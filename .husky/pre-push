#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run all PHP tests
echo "ğŸ§ª Running all PHP tests..."
if ! sail php artisan test --parallel; then
    echo "âŒ PHP tests failed! Push aborted."
    exit 1
fi

# Run all JavaScript tests
echo "ğŸ§ª Running all JavaScript tests..."
if ! sail npm run test:js -- --run; then
    echo "âŒ JavaScript tests failed! Push aborted."
    exit 1
fi

# TypeScript check
echo "ğŸ“ Running TypeScript check..."
if ! sail npm run typecheck; then
    echo "âŒ TypeScript check failed! Push aborted."
    exit 1
fi

echo "âœ… All tests passed! Pushing..."